{"version":3,"sources":["../../src/repositories/user.repositoty.ts"],"sourcesContent":["import type { PrismaClient, User } from \"@prisma/client\"\nimport { DatabaseError } from \"@root/errors/database.error.js\"\nimport { NoneError } from \"@root/errors/none.error.js\"\nimport type { Result } from \"@root/types/result.type.js\"\nimport { Effect as E, pipe } from \"effect\"\n\nexport class UserRepository {\n\tconstructor(private prisma: PrismaClient) {}\n\n\tfindById(id: number): Result<User, DatabaseError | NoneError> {\n\t\treturn pipe(\n\t\t\tE.tryPromise({\n\t\t\t\ttry: () =>\n\t\t\t\t\tthis.prisma.user.findUnique({\n\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\tcatch: error => new DatabaseError({ error })\n\t\t\t}),\n\t\t\tE.flatMap(E.fromNullable),\n\t\t\tE.catchTag(\"NoSuchElementException\", () => E.fail(new NoneError()))\n\t\t)\n\t}\n}\n"],"names":["DatabaseError","NoneError","Effect","E","pipe","UserRepository","findById","id","tryPromise","try","prisma","user","findUnique","where","catch","error","flatMap","fromNullable","catchTag","fail","constructor"],"mappings":";;;;;;;;;;;;;AACA,SAASA,aAAa,QAAQ,8BAAgC;AAC9D,SAASC,SAAS,QAAQ,0BAA4B;AAEtD,SAASC,UAAUC,CAAC,EAAEC,IAAI,QAAQ,SAAQ;AAE1C,OAAO,MAAMC;IAGZC,SAASC,EAAU,EAA2C;QAC7D,OAAOH,KACND,EAAEK,UAAU,CAAC;YACZC,KAAK,IACJ,IAAI,CAACC,MAAM,CAACC,IAAI,CAACC,UAAU,CAAC;oBAC3BC,OAAO;wBACNN;oBACD;gBACD;YACDO,OAAOC,CAAAA,QAAS,IAAIf,cAAc;oBAAEe;gBAAM;QAC3C,IACAZ,EAAEa,OAAO,CAACb,EAAEc,YAAY,GACxBd,EAAEe,QAAQ,CAAC,0BAA0B,IAAMf,EAAEgB,IAAI,CAAC,IAAIlB;IAExD;IAhBAmB,YAAY,AAAQV,MAAoB,CAAE;;aAAtBA,SAAAA;IAAuB;AAiB5C"}